<!DOCTYPE html>
<html>
<head>
  <link rel="stylesheet" href="/static/loginsignup.css">
  <link rel="stylesheet" href="/static/selectoption.css">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <script src="https://kit.fontawesome.com/140e17f580.js" crossorigin="anonymous"></script>
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300&display=swap" rel="stylesheet">
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@800&display=swap" rel="stylesheet">
  <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
</head>
<body>
  <div class="background" id="background">
    <div class="loginoption" id="loginoption">
      <div class="z" id="z">
      <div class="opt1">
      <div class="optionhead">step 1/2 <img src="/static/logo2.png"></div>
      <div class="heading">which method of trading you prefer ?</div>
      <div class="subheading">Choose your trading method:algorithm based or copy trading</div>
      <div class="order">
        <button class="opt" onclick="detect('next')">
          <i class="fa-solid fa-chart-line fa-2x"></i>
          <div class="opttype">algo-trading<div>the best algorithm in the market</div></div>
        </button> 
        <button class="opt" onclick="detect('next')">
          <i class="fa-solid fa-chalkboard-user fa-2x"></i>
          <div class="opttype">copy-trading<div>copy from successful traders</div></div>
        </button>
      </div>
      <div class="subcan"><button class="cancel" onclick="cancel('none')">cancel</button>
        <button class="go" id="next" disabled onclick="scrollin(1000)">next</button></div>
    </div>
    <div class="opt2">
      <div class="optionhead">step 2/2 <img src="/static/logo2.png"></div>
      <div class="heading"><button id="back" onclick="scrollin(0)"><i class="fa-solid fa-chevron-left fa-2x"></i></button>which trading broker do you prefer ?</div>
      <div class="subheading">Choose your trading broker</div>
      <div class="order">
        <button class="opt" onclick="detect('submit')">
          <i class="fa-solid fa-chart-line fa-2x"></i>
          <div class="opttype">algo-trading<div>the best algorithm in the market</div></div>
        </button> 
        <button class="opt" onclick="detect('submit')">
          <i class="fa-solid fa-chalkboard-user fa-2x"></i>
          <div class="opttype">copy-trading<div>copy from successful traders</div></div>
        </button>
      </div>
      <div class="subcan"><button class="cancel" onclick="cancel('none')">cancel</button>
        <button class="go" disabled id="submit">submit</button></div>
    </div>
    </div>
    </div>
  </div>
  <div class="middle">
    <div class="account">
      <h1>Donâ€™t Have an <br>Account?</h1>
      <button onclick="location.href='/signup'">Create a free account</button>
    </div>
  </div>
  <div class="middle">
    <div class="login-wall">
      <img src="/static/logo.png">
      <h4>The best algotrading platform</h4>
      <hr>
      <p id="error" style="color:red"></p>
      <form id="loginForm">
        <p>Email Address Or Mobile Number</p>
        <input type="email" id="email" placeholder="example@gmail.com">
        <p>Password</p>
        <input type="password" id="password" placeholder="*****">
        <button type="submit" class="log-in" onclick="cancel('flex')">Log in</button>
      </form>
      <button class="forgot" onclick="window.location='/forgot_password'">Forgot password?</button>

    </div>
  </div>
  <script>
    function scrollin(widt){
      document.getElementById('loginoption').scrollLeft=widt;
    }
    function cancel(inpu){
      document.getElementById('background').style.display=inpu;
    }
    function detect(elemid){
      document.getElementById(elemid).disabled=false;
    }
    $(document).ready(function() {
      $('#loginForm').submit(function(e) {
        e.preventDefault();
        
        var email = $('#email').val();
        var password = $('#password').val();
        
        login(email, password);
      });
    });
    
    function login(email, password) {
      $.ajax({
        url: "/login",
        method: "POST",
        data: { email: email, password: password },
        success: function(response) {
          $("#error").text(response).css("color", "green");

          console.log('Success:', response);
          window.location.href = '/dashboard';
          },
        error: function(xhr, textStatus, errorThrown) {
          var errorMessage = xhr.responseText;
          console.log(errorMessage);
          $("#error").text(errorMessage);
          }
      });
    }
  </script>

</body>
</html>
